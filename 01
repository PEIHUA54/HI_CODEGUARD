å¥½çš„!ä½ éœ€è¦å°‡ TextBox çš„æ–‡å­—è½‰æ›æˆ intã€‚é€™è£¡æœ‰å¹¾ç¨®æ–¹æ³•:

## ğŸ”§ ä¿®æ­£å¾Œçš„å®Œæ•´ç¨‹å¼ç¢¼

```csharp
using HI_APACCESS_DLL_TEST;
using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace HI_CODEGUARD_DLL_TEST
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        // ç”¢ç”Ÿæˆæ¬Šç¢¼
        private void button1_Click(object sender, EventArgs e)
        {
            try
            {
                // æ–¹æ³•1: ä½¿ç”¨ int.Parse (æ¨è–¦ç”¨æ–¼ç¢ºå®šæ˜¯æ•¸å­—çš„æƒ…æ³)
                var req = new Model.GetCodeRequest
                {
                    SysID = txtSysID.Text,
                    Data = txtData.Text,
                    CodeLength = int.Parse(txtCodeLength.Text)  // â† string è½‰ int
                };
                
                string jsonReq = JsonConvert.SerializeObject(req);
                string jsonRes = new HI_CODEGUARD_DLL.CODE_GUARD().GetCode(jsonReq);
                var res = JsonConvert.DeserializeObject<Model.GetCodeResponse>(jsonRes);

                ShowResult(jsonReq, jsonRes);
            }
            catch (FormatException)
            {
                MessageBox.Show("CodeLength å¿…é ˆæ˜¯æ•¸å­—!", "è¼¸å…¥éŒ¯èª¤", MessageBoxButtons.OK, MessageBoxIcon.Warning);
            }
            catch (Exception ex)
            {
                MessageBox.Show($"éŒ¯èª¤: {ex.Message}", "ç³»çµ±éŒ¯èª¤", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }

        // é©—è­‰æˆæ¬Šç¢¼
        private void button2_Click(object sender, EventArgs e)
        {
            try
            {
                // æ–¹æ³•1: ä½¿ç”¨ int.Parse
                var req = new Model.VerifyCodeRequest
                {
                    SysID = txtSysID.Text,
                    Data = txtData.Text,
                    CodeLength = int.Parse(txtCodeLength.Text),      // â† string è½‰ int
                    MaxMinutes = int.Parse(txtMaxMinutes.Text),      // â† string è½‰ int
                    InputCode = txtInputCode.Text
                };
                
                string jsonReq = JsonConvert.SerializeObject(req);
                string jsonRes = new HI_CODEGUARD_DLL.CODE_GUARD().VerifyCode(jsonReq);
                var res = JsonConvert.DeserializeObject<Model.VerifyCodeResponse>(jsonRes);

                ShowResult(jsonReq, jsonRes);
            }
            catch (FormatException)
            {
                MessageBox.Show("CodeLength å’Œ MaxMinutes å¿…é ˆæ˜¯æ•¸å­—!", "è¼¸å…¥éŒ¯èª¤", MessageBoxButtons.OK, MessageBoxIcon.Warning);
            }
            catch (Exception ex)
            {
                MessageBox.Show($"éŒ¯èª¤: {ex.Message}", "ç³»çµ±éŒ¯èª¤", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }

        // é¡¯ç¤º Request & Response
        private void ShowResult(string req, string res)
        {
            Form2 f = new Form2();
            f.TextBoxMsg1 = req;
            f.TextBoxMsg2 = res;
            f.Show();
        }
    }
}
```

-----

## ğŸ“š String è½‰ Int çš„ä¸‰ç¨®æ–¹æ³•

### æ–¹æ³•1: `int.Parse()` - **æœ€ç°¡å–®ç›´æ¥**

```csharp
// å¦‚æœè½‰æ›å¤±æ•—æœƒæ‹‹å‡º FormatException
CodeLength = int.Parse(txtCodeLength.Text)
```

**å„ªé»:** ç°¡å–®æ˜ç­  
**ç¼ºé»:** å¦‚æœä¸æ˜¯æ•¸å­—æœƒæ‹‹å‡ºä¾‹å¤–

-----

### æ–¹æ³•2: `int.TryParse()` - **æœ€å®‰å…¨**

```csharp
// ç”¢ç”Ÿæˆæ¬Šç¢¼ - ä½¿ç”¨ TryParse
private void button1_Click(object sender, EventArgs e)
{
    try
    {
        // é©—è­‰ CodeLength æ˜¯å¦ç‚ºæ•¸å­—
        if (!int.TryParse(txtCodeLength.Text, out int codeLength))
        {
            MessageBox.Show("CodeLength å¿…é ˆæ˜¯æ•¸å­—!", "è¼¸å…¥éŒ¯èª¤", MessageBoxButtons.OK, MessageBoxIcon.Warning);
            txtCodeLength.Focus();
            return;
        }

        var req = new Model.GetCodeRequest
        {
            SysID = txtSysID.Text,
            Data = txtData.Text,
            CodeLength = codeLength  // â† ä½¿ç”¨å·²è½‰æ›çš„è®Šæ•¸
        };
        
        string jsonReq = JsonConvert.SerializeObject(req);
        string jsonRes = new HI_CODEGUARD_DLL.CODE_GUARD().GetCode(jsonReq);
        var res = JsonConvert.DeserializeObject<Model.GetCodeResponse>(jsonRes);

        ShowResult(jsonReq, jsonRes);
    }
    catch (Exception ex)
    {
        MessageBox.Show($"éŒ¯èª¤: {ex.Message}", "ç³»çµ±éŒ¯èª¤", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
}

// é©—è­‰æˆæ¬Šç¢¼ - ä½¿ç”¨ TryParse
private void button2_Click(object sender, EventArgs e)
{
    try
    {
        // é©—è­‰ CodeLength æ˜¯å¦ç‚ºæ•¸å­—
        if (!int.TryParse(txtCodeLength.Text, out int codeLength))
        {
            MessageBox.Show("CodeLength å¿…é ˆæ˜¯æ•¸å­—!", "è¼¸å…¥éŒ¯èª¤", MessageBoxButtons.OK, MessageBoxIcon.Warning);
            txtCodeLength.Focus();
            return;
        }

        // é©—è­‰ MaxMinutes æ˜¯å¦ç‚ºæ•¸å­—
        if (!int.TryParse(txtMaxMinutes.Text, out int maxMinutes))
        {
            MessageBox.Show("MaxMinutes å¿…é ˆæ˜¯æ•¸å­—!", "è¼¸å…¥éŒ¯èª¤", MessageBoxButtons.OK, MessageBoxIcon.Warning);
            txtMaxMinutes.Focus();
            return;
        }

        var req = new Model.VerifyCodeRequest
        {
            SysID = txtSysID.Text,
            Data = txtData.Text,
            CodeLength = codeLength,    // â† ä½¿ç”¨å·²è½‰æ›çš„è®Šæ•¸
            MaxMinutes = maxMinutes,    // â† ä½¿ç”¨å·²è½‰æ›çš„è®Šæ•¸
            InputCode = txtInputCode.Text
        };
        
        string jsonReq = JsonConvert.SerializeObject(req);
        string jsonRes = new HI_CODEGUARD_DLL.CODE_GUARD().VerifyCode(jsonReq);
        var res = JsonConvert.DeserializeObject<Model.VerifyCodeResponse>(jsonRes);

        ShowResult(jsonReq, jsonRes);
    }
    catch (Exception ex)
    {
        MessageBox.Show($"éŒ¯èª¤: {ex.Message}", "ç³»çµ±éŒ¯èª¤", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
}
```

**å„ªé»:** æœ€å®‰å…¨,ä¸æœƒæ‹‹å‡ºä¾‹å¤–  
**ç¼ºé»:** ç¨‹å¼ç¢¼ç¨å¾®é•·ä¸€é»

-----

### æ–¹æ³•3: `Convert.ToInt32()` - **å¯è™•ç† null**

```csharp
CodeLength = Convert.ToInt32(txtCodeLength.Text)
```

**å„ªé»:** å¯ä»¥è™•ç† null å’Œç©ºå­—ä¸²(æœƒå›å‚³ 0)  
**ç¼ºé»:** éæ•¸å­—æœƒæ‹‹å‡ºä¾‹å¤–

-----

## ğŸ¯ æˆ‘çš„å»ºè­°

### **ä½¿ç”¨æ–¹æ³•1 (int.Parse + try-catch)** - æœ€å¹³è¡¡

é€™æ˜¯æœ€ç°¡æ½”ä¸”å¯¦ç”¨çš„æ–¹å¼:

```csharp
using HI_APACCESS_DLL_TEST;
using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace HI_CODEGUARD_DLL_TEST
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        // ç”¢ç”Ÿæˆæ¬Šç¢¼
        private void button1_Click(object sender, EventArgs e)
        {
            try
            {
                var req = new Model.GetCodeRequest
                {
                    SysID = txtSysID.Text,
                    Data = txtData.Text,
                    CodeLength = int.Parse(txtCodeLength.Text)  // string â†’ int
                };
                
                string jsonReq = JsonConvert.SerializeObject(req);
                string jsonRes = new HI_CODEGUARD_DLL.CODE_GUARD().GetCode(jsonReq);
                var res = JsonConvert.DeserializeObject<Model.GetCodeResponse>(jsonRes);

                ShowResult(jsonReq, jsonRes);
            }
            catch (FormatException)
            {
                MessageBox.Show("CodeLength å¿…é ˆæ˜¯æ•¸å­—!", "è¼¸å…¥éŒ¯èª¤", MessageBoxButtons.OK, MessageBoxIcon.Warning);
                txtCodeLength.Focus();
                txtCodeLength.SelectAll();
            }
            catch (Exception ex)
            {
                MessageBox.Show($"éŒ¯èª¤: {ex.Message}", "ç³»çµ±éŒ¯èª¤", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }

        // é©—è­‰æˆæ¬Šç¢¼
        private void button2_Click(object sender, EventArgs e)
        {
            try
            {
                var req = new Model.VerifyCodeRequest
                {
                    SysID = txtSysID.Text,
                    Data = txtData.Text,
                    CodeLength = int.Parse(txtCodeLength.Text),   // string â†’ int
                    MaxMinutes = int.Parse(txtMaxMinutes.Text),   // string â†’ int
                    InputCode = txtInputCode.Text
                };
                
                string jsonReq = JsonConvert.SerializeObject(req);
                string jsonRes = new HI_CODEGUARD_DLL.CODE_GUARD().VerifyCode(jsonReq);
                var res = JsonConvert.DeserializeObject<Model.VerifyCodeResponse>(jsonRes);

                ShowResult(jsonReq, jsonRes);
            }
            catch (FormatException)
            {
                MessageBox.Show("CodeLength å’Œ MaxMinutes å¿…é ˆæ˜¯æ•¸å­—!", "è¼¸å…¥éŒ¯èª¤", MessageBoxButtons.OK, MessageBoxIcon.Warning);
            }
            catch (Exception ex)
            {
                MessageBox.Show($"éŒ¯èª¤: {ex.Message}", "ç³»çµ±éŒ¯èª¤", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }

        // é¡¯ç¤º Request & Response
        private void ShowResult(string req, string res)
        {
            Form2 f = new Form2();
            f.TextBoxMsg1 = req;
            f.TextBoxMsg2 = res;
            f.Show();
        }
    }
}
```

-----

## ğŸ’¡ é¡å¤–å»ºè­°:é™åˆ¶ TextBox åªèƒ½è¼¸å…¥æ•¸å­—

åœ¨ Form1.Designer.cs æˆ– Form1.cs çš„ InitializeComponent() å¾ŒåŠ å…¥:

```csharp
public Form1()
{
    InitializeComponent();
    
    // é™åˆ¶åªèƒ½è¼¸å…¥æ•¸å­—
    txtCodeLength.KeyPress += NumberOnly_KeyPress;
    txtMaxMinutes.KeyPress += NumberOnly_KeyPress;
}

// é™åˆ¶åªèƒ½è¼¸å…¥æ•¸å­—çš„æ–¹æ³•
private void NumberOnly_KeyPress(object sender, KeyPressEventArgs e)
{
    // åªå…è¨±æ•¸å­—å’Œæ§åˆ¶å­—å…ƒ(å¦‚Backspace)
    if (!char.IsDigit(e.KeyChar) && !char.IsControl(e.KeyChar))
    {
        e.Handled = true;  // æ‹’çµ•è¼¸å…¥
    }
}
```

é€™æ¨£ä½¿ç”¨è€…å°±ç„¡æ³•åœ¨ CodeLength å’Œ MaxMinutes æ¬„ä½è¼¸å…¥éæ•¸å­—çš„å…§å®¹!

-----

## ğŸ“ ç¸½çµ

**æœ€ç°¡å–®çš„æ”¹æ³•:**

```csharp
CodeLength = int.Parse(txtCodeLength.Text)
MaxMinutes = int.Parse(txtMaxMinutes.Text)
```

åŠ ä¸Š `try-catch` è™•ç†éŒ¯èª¤å°±å®Œç¾äº†! ğŸ‘â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹